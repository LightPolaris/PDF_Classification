# PDF文档快速分类

## 简介

本项目是一个基于 Flask 框架构建的 Web 应用程序，旨在对上传的 PDF 文档进行快速扫描、OCR 文字识别、自动分类以及生成分类后的 PDF 文件。系统利用 PaddleOCR 提取文档中的文字信息，通过预设关键词对页面进行初步分类，并提供人工审核与调整功能。

**源代码已做数据脱敏处理**

## 功能特点

- **PDF 上传与转换**
  支持上传 PDF 文件，并使用 `pdf2image` 将 PDF 转换为图片格式，便于后续 OCR 处理和预览。
- **快速扫描预检**
  上传的 PDF 文件经过转换后，将在预检页面显示转换后的各个页面，支持页面导航（上一页、下一页、跳转到指定页面）。
- **初步自动分类**
  利用 PaddleOCR 对每页图片进行文字识别，根据预设的关键词和权重（如“苹果”、“香蕉”、“橘子”、“其他”等）对文档页面进行自动分类。
- **人工审核与快速分类**
  对于未能自动准确分类的页面，提供单独的审核界面，允许用户对“未分类”页面进行人工快速分类，支持调整到各个类别（如苹果、香蕉、橘子、其他）。
- **PDF 生成**
  根据分类结果，将同一类别的页面生成新的 PDF 文件，便于归档和后续处理。

## 项目结构

```
├── app.py                         # 主程序文件，包含所有 Flask 路由和核心逻辑
├── templates/                     # HTML 模板文件（如 index.html、scanprecheck.html 等）
├── static/
│   └── images/                    # 存放转换后的 PDF 页面图片
└── uploads/                       # 上传的 PDF 文件及中间数据（如 last_pdf.pkl）
```

## 依赖环境

```
Flask==3.1.0
pdf2image==1.17.0
paddleocr==2.9.1
numpy==1.26.4
Pillow==11.1.0
```

> **注意**：PaddleOCR 在首次运行时会自动下载模型文件，请确保网络连接正常。


## 安装与运行

1. **克隆项目**
   将项目克隆到本地：

   ```
   git clone <项目仓库地址>
   cd PDF_Classification
   ```

2. **安装依赖**
   通过 pip 安装所需的依赖库：

   ```
   pip install -r requirements.txt
   ```

   或者手动安装各个依赖。

3. **配置 poppler**

   - 下载适合你操作系统的 poppler 工具，并解压到本地某个目录。
   - 在代码中确认 `poppler_path` 参数指向正确的 poppler 可执行文件目录。
   - 本项目使用poppler-24.08.0
   ```
   https://github.com/oschwartz10612/poppler-windows
   poppler-24.08.0\Library\bin
   ```   


4. **启动应用**
   运行以下命令启动 Flask 服务：

   ```
   python app.py
   ```

   应用默认在 `http://127.0.0.1:5000` 上运行。

5. **访问应用**
   打开浏览器访问 http://127.0.0.1:5000 即可使用该系统。

## 使用说明

1. **首页**
   访问根路径 `/`，进入系统介绍页面。
2. **PDF 上传与扫描**
   在“快速扫描”页面上传 PDF 文件，系统会将 PDF 转换为图片并保存处理结果，同时生成 `last_pdf.pkl` 文件保存中间数据。
3. **页面预检与导航**
   转换后的页面将在预检页面显示，用户可通过“上一页”、“下一页”或“跳转”按钮浏览各个页面。
4. **初步自动分类**
   点击初步分类按钮后，系统利用 PaddleOCR 对每页图片进行 OCR 识别，并根据预设关键词自动对页面进行分类，分类结果保存于 `last_pdf.pkl`。
5. **人工审核与快速分类**
   针对未能自动准确分类的页面，可进入相应分类审核页面（如苹果、香蕉、橘子、其他）进行手动调整和确认。
6. **生成 PDF 文件**
   在分类审核完成后，选择生成 PDF 功能，将同一类别的页面合并生成新的 PDF 文件，方便后续归档管理。
7. 可以根据自己的需求设置相应的关键词。

## 注意事项

- 系统中间数据存储在 `uploads/last_pdf.pkl` 文件中，上传新的 PDF 文件可能会覆盖现有数据。
- 由于涉及图像处理和 OCR 识别，处理较大或页数较多的 PDF 文件时可能会消耗较长时间，请耐心等待。
- 确保 poppler 配置正确，否则 PDF 转换可能无法正常进行。

## 贡献与反馈

这是我在实习期间为了提高工作效率而开发的一个小应用。

欢迎大家对本项目提出建议或贡献代码。若有问题或改进意见，请提交 issue 或 Pull Request。

## 许可协议

本项目采用 MIT 许可证，详情请参阅 LICENSE 文件。